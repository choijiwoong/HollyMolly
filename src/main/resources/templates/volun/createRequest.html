<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div class="container">
    <form action="/volun/createRequest" method="post"><!--값을 입력할 수 있게하는 툴-->
        <div class="form-group">
            <label for="exectime">봉사시간</label>
            <input type="text" id="exectime" name="exectime" placeholder="0000-00-00-00-00">
        </div>

        <div class="form-group">
            <label for="location">주소(아래의 지도에서 마커로 표시해주세요)</label>
            <input type="text" id="location" name="location" placeholder="검색할 주소를 입력해주세요"><button type="button" onclick="searchByAddress()">검색</button>
            <input type="text" id="latitude" name="latitude" placeholder="위도">
            <input type="text" id="longitude" name="longitude" placeholder="경도">
            <div id="map" style="width:750px;height:350px;"></div>
        </div>

        <div class="form-group">
            <label for="content">봉사내용</label>
            <input type="text" id="content" name="content" placeholder="원하시는 봉사활동을 입력하세요">
        </div>

        <button type="submit">등록</button><!--form action method에 따라 post 수행-->
    </form>
</div>
</body>

<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f0b2461641fe36bfad41a885e385288f&libraries=services"></script>
<script>
//-------------카카오맵-------------
//지도 설정
var mapContainer = document.getElementById('map')
    mapOption = {
        center: new kakao.maps.LatLng(37.56622714621121, 126.97793436924096),
        level: 8
    };
//지도 가시화
var map = new kakao.maps.Map(mapContainer, mapOption);
//기본 마커 표시
var marker = new kakao.maps.Marker({
    position: map.getCenter()
});
marker.setMap(map);//마커 가시화


//<-------------개발도우미------------->
// 지도에 확대 축소 컨트롤을 생성한다
var zoomControl = new kakao.maps.ZoomControl();
// 지도의 우측에 확대 축소 컨트롤을 추가한다
map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
// 지도클릭시 마커생성
kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
    // 클릭한 위도, 경도 정보를 가져옵니다
    var latlng = mouseEvent.latLng;

    // 마커 위치를 클릭한 위치로 옮깁니다
    marker.setPosition(latlng);

    var buffer=document.getElementById("latitude");
    buffer.value=marker.getPosition().getLat();
    buffer=document.getElementById("longitude");
    buffer.value=marker.getPosition().getLng();
});

//주소검색기능
function searchByAddress(){
    //주소-좌표 변환 객체
    var geocoder = new kakao.maps.services.Geocoder();
    geocoder.addressSearch(document.getElementById("location").value, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
            var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
            marker.setPosition(coords);
            map.setCenter(coords);

            //위경도세팅
            var buffer=document.getElementById("latitude");
            buffer.value=marker.getPosition().getLat();
            buffer=document.getElementById("longitude");
            buffer.value=marker.getPosition().getLng();
        }
    });
}

</script>

</html>